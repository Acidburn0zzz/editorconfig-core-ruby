#!/usr/bin/env ruby

require "optparse"
require "editor_config"

options = {
  config: ".editorconfig"
}

OptionParser.new do |opts|
  opts.banner = "Usage: editorconfig [OPTIONS] FILENAME"

  opts.on("-f <name>", "Specify conf filename other than \".editorconfig\"") do |path|
    options[:config] = path
  end

  opts.on("-h", "--help", "Print this help message") do
    puts opts
    exit
  end

  opts.on("-v", "--version", "Display version information") do
    puts "EditorConfig Ruby Core Version #{EditorConfig::VERSION}"
    exit
  end
end.parse!

config = EditorConfig.load_file(ARGV[0], **options)
config = EditorConfig.preprocess2(config)
config.each { |k, v| puts "#{k}=#{v}" }
